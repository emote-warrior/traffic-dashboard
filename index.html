<!DOCTYPE html>
<html>
<head>
    <title>Delhi Route Dashboard</title>
    <style>
        body {
            font-family: 'Aptos', sans-serif;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .speed-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }
        .speed-box {
            border: 2px solid black;
            padding: 20px;
            margin: 10px;
            font-size: 24px;
            font-weight: bold;
            background-color: #f9f9f9;
            width: 250px;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=${{ secrets.GOOGLE_MAPS_API_KEY }}&libraries=places"></script>
</head>
<body>
    <h2>Delhi Route Dashboard</h2>
    
    <label for="routeSelect">Select a Route:</label>
    <select id="routeSelect" onchange="fetchLiveData()">
        <option value="">-- Select a Route --</option>
    </select>
    
    <table>
        <tr>
            <th>Route Number</th>
            <th>Road Name</th>
            <th>Towards Direction</th>
            <th>Distance (km)</th>
        </tr>
        <tbody id="routeTable"></tbody>
    </table>

    <div class="speed-container">
        <div class="speed-box" id="freeFlowSpeed">Free Flow Speed: -- km/h</div>
        <div class="speed-box" id="freeFlowTime">Free Flow Time: -- mins</div>
        <div class="speed-box" id="currentSpeed">Current Speed: -- km/h</div>
        <div class="speed-box" id="currentTravelTime">Current Travel Time: -- mins</div>
    </div>
    
    <script>
        const routes = [
            { number: "1", road: "Baba Banda Singh Bahadur Setu", direction: "Sarai Kale Khan", distance: 4.4 },
            { number: "2", road: "Jangpura Rd", direction: "Delhi Golf Club", distance: 5.8 },
            { number: "3", road: "Mahatma Gandhi Rd", direction: "Ashram", distance: 7.5 },
            { number: "4", road: "Mahatma Gandhi Rd", direction: "Moti Bagh", distance: 6.4 },
            { number: "5", road: "Sri Aurobindo Marg", direction: "Mehrauli", distance: 5.1 },
            { number: "6", road: "Outer Ring Rd", direction: "Okhla", distance: 5.5 },
            { number: "7", road: "Outer Ring Rd", direction: "Greater Kailash to Kakaji Mandir", distance: 6.3 },
            { number: "8", road: "Acharya Shree Tulsi Marg", direction: "Qutab Minar", distance: 7.8 },
            { number: "9", road: "Acharya Shree Tulsi Marg", direction: "Hauj Khas", distance: 8.0 },
            { number: "10", road: "Delhi Ajmer Expressway", direction: "Gurugram to Delhi I.G.I. Airport", distance: 9.1 },
            { number: "11", road: "Delhi Ajmer Expressway", direction: "Dhaula Kuan to Delhi I.G.I. Airport", distance: 8.9 },
            { number: "12", road: "Vikas Marg", direction: "ITO", distance: 6.2 },
            { number: "13", road: "India Gate Circle - Purana Qila Rd", direction: "Pragati Maidan", distance: 3.5 },
            { number: "14", road: "Pragati Maidan Tunnel Rd", direction: "Sant Nagar", distance: 4.7 },
            { number: "15", road: "Mathura Rd - Bhairon Marg", direction: "Supreme Court to Sant Nagar", distance: 5.4 },
            { number: "16", road: "GT Karnal Rd", direction: "Shastri Park", distance: 7.0 },
            { number: "17", road: "Lothian Rd - Netaji Subash Marg", direction: "Delhi Gate", distance: 3.9 },
            { number: "18", road: "Desh Bandhu Gupta Rd", direction: "Sarai Rohilla Station", distance: 5.2 },
            { number: "19", road: "Lothian Rd - Netaji Subash Marg", direction: "Jama Masjid", distance: 4.1 },
            { number: "20", road: "Bahadur Shah Zafar Marg", direction: "Delhi Gate", distance: 4.8 },
            { number: "21", road: "Shivaji Marg", direction: "Najafgarh", distance: 9.3 },
            { number: "22", road: "Shivaji Marg", direction: "Subhash Nagar Metro", distance: 6.0 },
            { number: "23", road: "Samaypur Badli Metro Rd", direction: "Rohini", distance: 5.6 },
            { number: "24", road: "GT Karnal Rd", direction: "Libas Pur", distance: 7.1 },
            { number: "25", road: "Mehrauli Badarpur Rd", direction: "Lado Sarai", distance: 8.4 }
        ];

        function fetchLiveData() {
            const selectedRouteNumber = document.getElementById("routeSelect").value;
            const selectedRoute = routes.find(route => route.number === selectedRouteNumber);
            if (!selectedRoute) return;
            
            const url = `https://maps.googleapis.com/maps/api/directions/json?origin=${selectedRoute.road}&destination=${selectedRoute.direction}&key=${{ secrets.GOOGLE_MAPS_API_KEY }}`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        function populateDropdown() {
            const dropdown = document.getElementById("routeSelect");
            routes.forEach(route => {
                const option = document.createElement("option");
                option.value = route.number;
                option.textContent = `Route ${route.number}`;
                dropdown.appendChild(option);
            });
        }

        window.onload = function() {
            populateDropdown();
        };
    </script>
</body>
</html>
